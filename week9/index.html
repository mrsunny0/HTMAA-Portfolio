<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Project 9</title>

    <!-- Bootstrap core CSS -->
    <link href="../lib/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom fonts for this template -->
    <link href="../lib/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet" type="text/css">

    <!-- leafletjs for funny map -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.2.0/dist/leaflet.css"
   integrity="sha512-M2wvCLH6DSRazYeZRIm1JnYyh22purTM+FDB5CsyxtQJYeKq83arPe5wgbNmcFXGqiSH2XR8dT/fJISVA1r/zQ=="
   crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.2.0/dist/leaflet.js"
   integrity="sha512-lInM/apFSqyy1o6s89K4iQUKg6ppXEgsVxT35HbzUupEVRh2Eu9Wdl4tHj7dZO0s1uvplcYGmt3498TtHq+log=="
   crossorigin=""></script>

   <!-- prism syntax highlighting -->
   <link rel="stylesheet" type="text/css" href="../lib/prism/prism.css">

    <!-- Custom styles for this template -->
    <link href="../css/freelancer.css" rel="stylesheet">

  </head>

  <body id="page-top">

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
      <div class="container">
        <a class="navbar-brand js-scroll-trigger" href="../index.html">George Sun</a>
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          Menu
          <i class="fa fa-bars"></i>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav ml-auto">
            <li class='nav-item'>
              <a class="nav-link js-scroll-trigger" href="#page-top">HOME</a>
            </li>
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#project-info">Project Info</a>
            </li>
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#portfolio">Portfolio</a>
            </li>
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#about">About</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Intro Heading -->
    <section>
      <header class="masthead">
        <div class="container">
          <!-- header image -->
          <a href="">
            <img id='photo-header' class="img-fluid img-circle" alt="">
            <div class="intro-text">
          </a>
          <!-- header text -->
          <div class="intro-text">
            <span id='text-header' class="primary-text"></span>
            <hr class="star-light">
            <span id='details-header' class="secondary-text"></span>
          </div>
        </div>
      </header>
    </section>

    <!-- ==============================================================- -->
    <!--                         PROJECT CONTENT                         -->
    <!-- ==============================================================- -->
    <section id='project-info'>
      <div class='container'>
        <h2 class='text-center'>Project Info</h2>
        <hr class="star-secondary">
        
        <!-- PCB Design -->
        <div class='row py-4'>
          <div class='col-lg-12'>
            <!-- anchor -->
            <a id='Xmega' style='display:block;visibility:hidden;position:relative;top:-100px'></a>
            <h4>Designing MotherBoard and Motor Controller</h4>
          </div>
          <div class='col-lg-5'>
            <p class='content-text'>
              
            </p>
          </div>
          <div class='col-lg-7'>
            <div class='row'>
              <div class='col-lg-6'>
                <img src="./images/eagle/Xmega32E5_sch.png" width='100%'>
              </div>
              <div class='col-lg-6'>
                <img src="./images/eagle/Xmega32E5_brd.png" width='100%'>
              </div>
            </div>
            <div class='row'>
              <div class='col-lg-6'>
                <img src="./images/eagle/hbridge_brd.png" width='100%'>
              </div>
              <div class='col-lg-6'>
                <img src="./images/eagle/hbridge_sch.png" width='100%'>
              </div>
            </div>
          </div>
        </div>

        <!-- milling -->
        <div class='row py-4'>
          <div class='col-lg-12'>
            <div class='row'>
              <div class='col-lg-6'>
                <div class='row'>
                  <p class='content-text'></p>
                </div>
                <div class='row'>
                  <video autoplay controls loop width='100%'>
                    <source src="./videos/milling.mp4" type="video/mp4">
                  </video>              
                </div>
              </div>
              <div class='col-lg-6'>
                <img src="./images/board/milled.jpg" width='100%'>
              </div>            
            </div>
            
            <div class='row py-4'>
              <div class='col-lg-4'>
                <img src="./images/board/breakout.jpg" width='100%'>
              </div>
              <div class='col-lg-4'>
                <img src="./images/board/Hbridge.jpg" width='100%'>
              </div>  
              <div class='col-lg-4'>
                <p class='content-text'></p>
              </div>                    
            </div>
          </div>
        </div>

        <!-- sample code -->
        <div class='row py-4'>
          <div class='col-lg-12'>
            <h4 style="text-align: right">
              Software
            </h4>
          </div>
          <div class='col-lg-12'>
            <!-- setup code -->
            <div class='row'>
              <div class='col-lg-12'>
                <h6>Setup</h6>
              </div>
              <div class='col-lg-6'>
                <pre class='line-numbers'>
                  <code class='language-c'>
                    <script>
                      #include <avr/io.h>
                      #define F_CPU 32000000UL
                      #include <util/delay.h>

                      // set up PWM variables
                      #define on_delay() _delay_us(25) //25 for 8MHz clock
                      #define off_delay() _delay_us(5) // 5 for 8MHz clock
                      #define PWM_count 100
                      #define STEPS 20
                    </script>
                  </code>
                </pre>               
              </div>
              <div class='col-lg-6'>
                <p class='content-text'></p>
              </div>
            </div> 
            <!-- clock code -->
            <div class='row'>
              <div class='col-lg-12'>
                <h6 style="text-align:right">Clock setup</h6>
              </div>
              <div class='col-lg-6'>
                <p class='content-text'></p>
              </div>
              <div class='col-lg-6'>
                <pre class='line-numbers'>
                  <code class='language-c'>
                    <script>
                      void setupCLK() {
                        OSC.CTRL = OSC_RC32MEN_bm; // enable 32MHz clock
                        while (!(OSC.STATUS & OSC_RC32MRDY_bm)); // wait for clock to be ready
                        CCP = CCP_IOREG_gc; // enable protected register change
                        CLK.CTRL = CLK_SCLKSEL_RC32M_gc; // switch to 32MHz clock
                      }
                    </script>
                  </code>
                </pre>               
              </div>
            </div>
            <!-- stepper code -->
            <div class='row'>
              <div class='col-lg-12'>
                <h6>Stepper Control</h6>
              </div>
              <div class='col-lg-6'>
                <pre class='line-numbers'>
                  <code class='language-c'>
                    <script>
                      void stepCW(PORT_t * PORT) {
                        bitBangPWM(PORT, A1, B1, A2, B2); //A+B+
                        bitBangPWM(PORT, A2, B1, A1, B2); //A-B+
                        bitBangPWM(PORT, A2, B2, A1, B1); //A-B-
                        bitBangPWM(PORT, A1, B2, A2, B1); //A+B-
                      }

                      void stepCCW(PORT_t * PORT) {
                        bitBangPWM(PORT, A1, B2, A2, B1); //A+B-
                        bitBangPWM(PORT, A2, B2, A1, B1); //A-B-
                        bitBangPWM(PORT, A2, B1, A1, B2); //A-B+
                        bitBangPWM(PORT, A1, B1, A2, B2); //A+B+
                      }
                    </script>
                  </code>
                </pre>               
              </div>
              <div class='col-lg-6'>
                <div class='row'>
                  <div class='col-lg-6'>
                    <img src="./images/motor/stepper_motor.gif" width='100%'>
                  </div>
                  <div class='col-lg-6'>
                    <table class="table table-condensed">
                      <thead>
                        <tr>
                          <th>CYCLE</th>
                          <th>A1</th>
                          <th>B1</th>
                          <th>A2</th>
                          <th>B2</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <td>1</td>
                          <td style='color: blue'>ON</td>
                          <td style='color: blue'>ON</td>
                          <td style='color: red'>OFF</td>
                          <td style='color: red'>OFF</td>
                        </tr>
                        <tr>
                          <td>2</td>
                          <td style='color: red'>OFF</td>
                          <td style='color: blue'>ON</td>
                          <td style='color: blue'>ON</td>
                          <td style='color: red'>OFF</td>
                        </tr>
                        <tr>
                          <td>3</td>
                          <td style='color: red'>OFF</td>
                          <td style='color: red'>OFF</td>
                          <td style='color: blue'>ON</td>
                          <td style='color: blue'>ON</td>                          
                        </tr>
                        <tr>
                          <td>4</td>
                          <td style='color: blue'>ON</td>
                          <td style='color: red'>OFF</td>
                          <td style='color: red'>OFF</td>
                          <td style='color: blue'>ON</td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
                <div class='row'>
                  <div class='col-lg-12'>
                    <p class='content-text'></p>
                  </div>
                </div>
              </div>
            </div>   
            <!-- PWM code -->
            <div class='row'>
              <div class='col-lg-12'>
                <h6 style="text-align:right">Clock setup</h6>
              </div>
              <div class='col-lg-6'>
                <p class='content-text'></p>
              </div>
              <div class='col-lg-6'>
                <pre class='line-numbers'>
                  <code class='language-c'>
                    <script>
                      void bitBangPWM(PORT_t * PORT, uint8_t outA, uint8_t outB, uint8_t clrA, uint8_t clrB) {
                        // clear unused pins
                        PORT->OUTCLR = clrA | clrB;
                        
                        // bit bang PWM
                        for(count=0; count < PWM_count; ++count) {
                          // turn on
                          PORT->OUTSET = outA | outB;
                          on_delay();
                          // turn off
                          PORT->OUTCLR = outA | outB;
                          off_delay();
                        }
                      }
                    </script>
                  </code>
                </pre>               
              </div>
            </div>
          </div>          
        </div>

        <!-- demo -->
        <div class='row py-4'>
          <div class='col-lg-12'>
            <h4>Making it move</h4>
          </div>
          <div class='col-lg-4'>
            <img src="./images/motor/oscope.jpg" width='100%'>
          </div>
          <div class='col-lg-4'>
            <img src="./images/motor/power.jpg" width='100%'>
          </div>
          <div class='col-lg-4' style='margin-top: 30px'> 
            <video autoplay loop controls width='100%'>
              <source src="./videos/large_motor.mp4" type="video/mp4">
            </video>                              
          </div>                    
        </div>

        <div class='row py-4'>
          <div class='col-lg-4'>
            <img src="./images/motor/motor1.jpg" width='100%'>
          </div>
          <div class='col-lg-4'>
            <img src="./images/motor/motor_solder.jpg" width='100%'>
          </div> 
          <div class='col-lg-4' style='margin-top: 30px'>
            <video autoplay loop controls width='100%'>
              <source src="./videos/tiny_motor.mp4" type="video/mp4">
            </video>
          </div>         
        </div>

        <div class='row py-4'>
          <div class='col-lg-12'>
            <p class='content-text'></p>
            <h4 class='text-center'>
              Thanks for reading
            </h4>
            <video autoplay loop controls width='50%' class='img-centered'>
              <source src="./videos/demo.mp4" type="video/mp4">
            </video>
          </div>
        </div>

      </div>
    </section>
    <!-- ==============================================================- -->
    <!--                          END OF CONTENT                         -->
    <!-- ==============================================================- -->

    <!-- Portfolio Grid Section -->
    <section id="portfolio">
      <div class="container">
        <h2 class="text-center">Portfolio</h2>
        <hr class="star-secondary">
        <div id='portfolio-items' class="row">
        </div>
      </div>
    </section>

    <!-- Final Project -->
    <section id='final-project'>
      <div class='container'>
        <h2 class='text-center'>Final Project</h2>
        <hr class='star-primary'>
        <div class='row'>
          <div class='col-lg-3'></div>
          <div id='final-project-content' class='col-lg-6 portfolio-item'></div>         
          <div class='col-lg-3'></div>
        </div>        
        <hr class='star-primary'>  
      </div>
    </section>    

    <!-- About Section -->
    <section class="success" id="about">
      <div class="container">
        <h2 class="text-center">About</h2>
        <hr class="star-light">
        <div class="row">
          <div class="col-lg-5 ml-auto" style="text-align: justify">
            <p class='about-text'></p>
          </div>
          <div class="col-lg-5 mr-auto" style="text-align: justify">
            <p class='about-text'></p>
          </div>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="text-center">
      <div class="footer-above">
        <div class="container">
          <div class="row">
            <div class="footer-col col-md-4">
              <h3>Where to find me</h3>
              <div id='map' style='height:300px; width:350px'></div>
            </div>
            <div class="footer-col col-md-4">
              <h3>Hobbies</h3>
              <ul class="list-inline">
                <li class="list-inline-item">
                  <a class="btn-social btn-outline" href="#">
                    <i class="fa fa-fw fa-fake"></i>
                  </a>
                </li>
                <li class="list-inline-item">
                  <a class="btn-social btn-outline" href="#">
                    <i class="fa fa-fw fa-fake"></i>
                  </a>
                </li>
                <li class="list-inline-item">
                  <a class="btn-social btn-outline" href="#">
                    <i class="fa fa-fw fa-fake"></i>
                  </a>
                </li>
                <li class="list-inline-item">
                  <a class="btn-social btn-outline" href="#">
                    <i class="fa fa-fw fa-fake"></i>
                  </a>
                </li>
                <li class="list-inline-item">
                  <a class="btn-social btn-outline" href="#">
                    <i class="fa fa-fw fa-fake"></i>
                  </a>
                </li>
              </ul>
            </div>
            <div class="footer-col col-md-4">
              <h3 id='contact-info'>Contact</h3>
            </div>
          </div>
        </div>
      </div>
      <div class="footer-below">
        <div class="container">
          <div class="row">
            <div class="col-lg-12">
              Copyright &copy; Sun Websites 2017
            </div>
          </div>
        </div>
      </div>
    </footer>

    <!-- Scroll to Top Button (Only visible on small and extra-small screen sizes) -->
    <div class="scroll-top d-lg-none">
      <a class="btn btn-primary js-scroll-trigger" href="#page-top">
        <i class="fa fa-chevron-up"></i>
      </a>
    </div>

    <!-- Bootstrap core JavaScript -->
    <script src="../lib/jquery/jquery.min.js"></script>
    <script src="../lib/popper/popper.min.js"></script>
    <script src="../lib/bootstrap/js/bootstrap.min.js"></script>

    <!-- Plugin JavaScript -->
    <script src="../lib/jquery-easing/jquery.easing.min.js"></script>

    <!-- Custom scripts for this template -->
    <script src="../js/freelancer.min.js"></script>    

    <!-- week related descriptions -->
    <script src='../week1/content-description/description.js' type="text/javascript"></script>
    <script src='../week2/content-description/description.js' type="text/javascript"></script>
    <script src='../week3/content-description/description.js' type="text/javascript"></script>
    <script src='../week4/content-description/description.js' type="text/javascript"></script>
    <script src='../week5/content-description/description.js' type="text/javascript"></script>
    <script src='../week6/content-description/description.js' type="text/javascript"></script>
    <script src='../week7/content-description/description.js' type="text/javascript"></script>
    <script src='../week8/content-description/description.js' type="text/javascript"></script>
    <script src='../week9/content-description/description.js' type="text/javascript"></script>
    <script src='../week10/content-description/description.js' type="text/javascript"></script>
    <script src='../week11/content-description/description.js' type="text/javascript"></script>
    <script src='../week12/content-description/description.js' type="text/javascript"></script>
    <script src='../week13/content-description/description.js' type="text/javascript"></script>
    <script src='../week14/content-description/description.js' type="text/javascript"></script>
    <script src='../week-final/content-description/description.js' type="text/javascript"></script>
    
    <!-- prism js -->
    <script src="../lib/prism/prism.js"></script>
    
    <!-- user defined custom scripts -->
    <script src='../js/user_defined_script.js'></script>

    <!-- week specific javascript file(s) -->
    <script src='./text.js'></script>
    
    <script>
      $(function() {
        var dir = ".."

        // populate content
        changePhotoHeader('week9', WEEK9, dir)
        makePortfolio(weeks, weekOBJ, dir)
        addFinalProject(dir)

        // add page specific text
        addContentText(TEXT)

        // initialize tooltip
        $('[data-toggle="tooltip"]').tooltip()
      })
    </script>

  </body>
</html>
